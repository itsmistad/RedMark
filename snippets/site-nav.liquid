<ul class="site-nav list--inline {{ nav_alignment }}" id="SiteNav">
  {% for link in linklists[section.settings.main_linklist].links %}
    {%- assign child_list_handle = link.title | handleize -%}

    {% comment %}
      Check if third-level nav exists on each parent link.
    {% endcomment %}
    {%- assign three_level_nav = false -%}
    {% if link.links != blank %}
      {% if link.levels == 2 %}
        {%- assign three_level_nav = true -%}
      {% endif %}
    {% endif %}

    {% if link.links != blank %}
      <li class="site-nav--has-dropdown{% if three_level_nav %} site-nav--has-centered-dropdown{% endif %}{% if link.active %} site-nav--active{% endif %}">
        <button class="site-nav__link site-nav__link--main site-nav__link--button"{% if link.active %} aria-current="page"{% endif %} type="button" aria-haspopup="true" aria-expanded="false" aria-controls="SiteNavLabel-{{ child_list_handle }}">
          {{ link.title }}
          {% include 'icon-chevron-down' %}
        </button>

        <div class="site-nav__dropdown{% if three_level_nav %} site-nav__dropdown--centered{% endif %}" id="SiteNavLabel-{{ child_list_handle }}">
          {% if three_level_nav %}
            <div class="site-nav__childlist">
              <ul class="site-nav__childlist-grid">
                {% if link.links != blank %}
                  {% for childlink in link.links %}
                    <li class="site-nav__childlist-item">
                      <a href="{{ childlink.url }}" class="site-nav__link site-nav__child-link site-nav__child-link--parent"{% if childlink.active %} aria-current="page"{% endif %}>
                        {{ childlink.title | escape }}
                      </a>
                      {% if childlink.links != blank %}
                        <ul class="sub_child" display="none">
                        {% for grandchildlink in childlink.links %}
                          <li>
                            <a href="{{ grandchildlink.url }}" class="site-nav__link site-nav__child-link"{% if grandchildlink.active %} aria-current="page"{% endif %}>
                              {{ grandchildlink.title | escape }}
                            </a>
                          </li>
                        {% endfor %}
                        </ul>
                      {% endif %}
                    </li>
                  {% endfor %}
                {% endif %}
              </ul>
            </div>
          {% else %}
            <ul>
              {% for childlink in link.links %}
                <li {% if childlink.active %}class="site-nav--active"{% endif %}>
                  <a href="{{ childlink.url }}" class="site-nav__link site-nav__child-link{% if forloop.last %} site-nav__link--last{% endif %}"{% if childlink.active %} aria-current="page"{% endif %}>
                    {{ childlink.title | escape }}
                  </a>
                </li>
              {% endfor %}
            </ul>
          {% endif %}
        </div>
      </li>
    {% else %}
      <li{% if link.active %} class="site-nav--active"{% endif %}>
        <a href="{{ link.url }}" class="site-nav__link site-nav__link--main"{% if link.active %} aria-current="page"{% endif %}>{{ link.title }}</a>
      </li>
    {% endif %}
  {% endfor %}
</ul>

<style>
  @media screen and (min-width:768px) and (max-width:3000px) {
    a.site-header__cart.righ {
      top: 23px !important;
    }
    button.btn--link.site-header__search-toggle.js-drawer-open-top {
      display: none !important;
    }
  }
  @media screen and (min-width:768px) and (max-width:1024px) {
    {% unless shop.customer_accounts_enabled %}
      .grid__item.small--one-whole.medium-up--one-quarter.text-right.site-header__icons.two_left {
        visibility: visible !important;
      }
      .lefts {
        right: 57% !important;
        top: 22px;
      }
      button.btn--link.site-header__search-toggle.js-drawer-open-top {
        position: absolute;
        left: -14%;
        top: -12px;
      }
      .lefts {
        top: 6px;
      }
    {% endunless %}
  }
  @media screen and (min-width:768px) and (max-width:1024px) {
    {% unless shop.customer_accounts_enabled %}
      .lefts {
        right: 38.5% !important;
        top: 21px;
      }
    {% endunless %}
  }
</style>